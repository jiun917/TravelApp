{"ast":null,"code":"import _objectSpread from \"C:/Users/BangJun/Desktop/TravelApp-master/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bscroll from 'better-scroll';\nimport { mapMutations } from 'vuex';\nexport default {\n  name: \"CitySearch\",\n  props: {\n    cities: Object\n  },\n  data: function data() {\n    return {\n      keyword: '',\n      list: [],\n      timer: null\n    };\n  },\n  computed: {\n    hasNoData: function hasNoData() {\n      return !this.list.length;\n    }\n  },\n  watch: {\n    keyword: function keyword() {\n      var _this = this;\n\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n\n      if (!this.keyword) {\n        this.list = [];\n        return;\n      }\n\n      this.timer = setTimeout(function () {\n        var result = [];\n\n        for (var i in _this.cities) {\n          _this.cities[i].forEach(function (value) {\n            if (value.spell.indexOf(_this.keyword) > -1 || value.name.indexOf(_this.keyword) > -1) {\n              result.push(value);\n            }\n          });\n        }\n\n        _this.list = result;\n      }, 100);\n    }\n  },\n  mounted: function mounted() {\n    this.scroll = new Bscroll(this.$refs.search);\n  },\n  methods: _objectSpread({\n    handleCityClick: function handleCityClick(city) {\n      this.changeCity(city);\n      this.$router.push('/');\n    }\n  }, mapMutations(['changeCity']))\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAmBA;AACA;AAEA;EACAA,kBADA;EAEAC;IACAC;EADA,CAFA;EAKAC,IALA,kBAKA;IACA;MACAC,WADA;MAEAC,QAFA;MAGAC;IAHA;EAKA,CAXA;EAYAC;IACAC,SADA,uBACA;MACA;IACA;EAHA,CAZA;EAiBAC;IACAL,OADA,qBACA;MAAA;;MACA;QACAM;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;;QACA;UACA;YACA,+CACAC,sCADA,EACA;cACAC;YACA;UACA,CALA;QAMA;;QACA;MACA,CAXA,EAWA,GAXA;IAYA;EArBA,CAjBA;EAwCAC,OAxCA,qBAwCA;IACA;EACA,CA1CA;EA2CAC;IACAC,eADA,2BACAC,IADA,EACA;MACA;MACA;IACA;EAJA,GAKAC,4BALA;AA3CA","names":["name","props","cities","data","keyword","list","timer","computed","hasNoData","watch","clearTimeout","value","result","mounted","methods","handleCityClick","city","mapMutations"],"sourceRoot":"src/pages/city/components","sources":["Search.vue"],"sourcesContent":["<template>\n<div>\n  <div class=\"search\">\n      <input v-model=\"keyword\" class=\"search-input\" type=\"text\" placeholder=\"請輸入城市名\">\n  </div>\n  <div class=\"search-content\" ref=\"search\" v-show=\"keyword\">\n      <ul>\n          <li class=\"search-item border-bottom\"  v-for=\"item in list\" :key=\"item.id\" @click=\"handleCityClick(item.name)\">\n            {{item.name}}\n          </li>\n          <li class=\"search-item border-bottom\" v-show=\"hasNoData\">\n              沒有找到匹配數據\n          </li>\n      </ul>\n  </div>\n</div>\n</template>\n\n<script>\nimport Bscroll from 'better-scroll'\nimport {mapMutations} from 'vuex'\n\nexport default {\n  name: \"CitySearch\",\n  props: {\n      cities: Object\n  },\n  data () {\n      return{\n          keyword: '',\n          list:[],\n          timer: null\n      }\n  },\n  computed: {\n      hasNoData() {\n          return !this.list.length \n      }\n  },\n  watch: {\n      keyword() {\n          if(this.timer) {\n              clearTimeout(this.timer)\n          }\n          if(!this.keyword){\n              this.list = []\n              return\n          }\n          this.timer = setTimeout(() => {\n              const result = []\n              for (let i in this.cities) {\n                  this.cities[i].forEach((value) => {\n                    if(value.spell.indexOf(this.keyword) > -1 ||\n                        value.name.indexOf(this.keyword) > -1) {\n                            result.push(value)\n                        }\n                  })\n              }\n              this.list = result\n          },100)\n      }\n  },\n  mounted () {\n      this.scroll = new Bscroll(this.$refs.search)\n  },\n  methods: {\n    handleCityClick (city) {\n      this.changeCity(city)\n      this.$router.push('/')\n    },\n    ...mapMutations(['changeCity'])\n\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@import '~@/assets/styles/varibles.styl'\n\n.search \n    height: 0.72rem\n    padding: 0.1rem\n    background: $bgColor\n\n    .search-input \n        box-sizing: border-box\n        width: 100%\n        height: 0.62rem\n        padding: 0 0.1rem\n        line-height: 0.62rem\n        text-align: center\n        border-radius: 0.06rem\n        color: #666\n\n.search-content \n    z-index: 1\n    overflow: hidden\n    position: absolute\n    top: 1.7rem \n    left: 0\n    right: 0\n    bottom: 0\n    background: #eee\n\n    .search-item \n        line-height: .62rem \n        padding-left: .2rem\n        background: #fff\n        color: #666\n</style>"]},"metadata":{},"sourceType":"module"}